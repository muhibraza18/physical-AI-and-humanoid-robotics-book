# FastAPI Backend Deployment Configuration

## Overview
This document outlines the deployment configuration for the FastAPI RAG backend, focusing on serverless environments like Vercel Serverless Functions.

## Deployment Target
- **Platform**: Vercel (recommended for serverless Python functions)
- **Region**: [To be decided, e.g., 'iad1' (Washington D.C.)]

## Configuration Details

### Vercel `vercel.json` Example
```json
{
  "rewrites": [
    { "source": "/api/(.*)", "destination": "/api" }
  ],
  "functions": {
    "api/index.py": {
      "runtime": "python3.9",
      "memory": 1024,
      "maxDuration": 10
    }
  }
}
```
*Note: This assumes your FastAPI app's entry point is `api/index.py` or similar relative to the Vercel project root.*

### Environment Variables
- `OPENAI_API_KEY`: Required for OpenAI Embedding/LLM calls.
- `QDRANT_HOST`: Qdrant Cloud service host URL.
- `QDRANT_API_KEY`: Qdrant Cloud API key.
- `QDRANT_COLLECTION_NAME`: Name of the Qdrant collection for book chunks.

### Python Dependencies
The `rag-backend/requirements.txt` will list all necessary Python packages (FastAPI, Uvicorn, Qdrant client, OpenAI client, Pydantic).

## Deployment Steps
1.  Push code to GitHub.
2.  Vercel automatically detects a Python project in the `rag-backend/` directory (if configured as a separate project or monorepo path).
3.  Vercel builds and deploys the FastAPI application as serverless functions.
4.  Environment variables are configured in the Vercel project settings.

## Risks & Considerations
-   **Cold Starts**: Serverless functions may experience cold starts, impacting initial response time.
-   **Cost**: Monitor usage (requests, GB-hours) for Free Tier limits and potential charges.
-   **Security**: Ensure API keys are stored securely as environment variables.
-   **Monorepo Path**: If part of a larger monorepo (which it is with Docusaurus), Vercel configuration needs to specify the build and root directories correctly. This might involve a `vercel.json` at the monorepo root pointing to `/rag-backend`.
